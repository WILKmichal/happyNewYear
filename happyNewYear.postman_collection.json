{
	"info": {
		"_postman_id": "c8954ea2-c1b1-4748-af9a-cff8cda97d52",
		"name": "happyNewYear",
		"description": "control API mick TS",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "2 authentification",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "086a0f2a-501a-4701-854b-69c904d103f2",
						"exec": [
							"var data = JSON.parse(responseBody);\r",
							"postman.setEnvironmentVariable(\"token\", data.token);\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "Email",
							"value": "{{email}}",
							"type": "text"
						},
						{
							"key": "Password",
							"value": "{{password}}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/login",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"login"
					]
				},
				"description": "route d'authentification d'un user"
			},
			"response": []
		},
		{
			"name": "3 inscription",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "a6ac7ea7-2927-41e2-b285-e96518b29046",
						"exec": [
							"pm.environment.set(\"email\", makeEmail());\r",
							"pm.environment.set(\"password\", Date.now());\r",
							"\r",
							"function makeEmail() {\r",
							"\tvar strValues=\"abcdefg12345\";\r",
							"\tvar strEmail = \"\";\r",
							"\tvar strTmp;\r",
							"\tfor (var i=0;i<10;i++) {\r",
							"\t\tstrTmp = strValues.charAt(Math.round(strValues.length*Math.random()));\r",
							"\t\tstrEmail = strEmail + strTmp;\r",
							"\t}\r",
							"\tstrTmp = \"\";\r",
							"\tstrEmail = strEmail + \"@\";\r",
							"\tfor (var j=0;j<8;j++) {\r",
							"\t\tstrTmp = strValues.charAt(Math.round(strValues.length*Math.random()));\r",
							"\t\tstrEmail = strEmail + strTmp;\r",
							"\t}\r",
							"\tstrEmail = strEmail + \".com\"\r",
							"\treturn strEmail;\r",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "firstname",
							"value": "{{$randomFirstName}}",
							"type": "text"
						},
						{
							"key": "lastname",
							"value": "{{$randomLastName}}",
							"type": "text"
						},
						{
							"key": "email",
							"value": "{{email}}",
							"type": "text"
						},
						{
							"key": "password",
							"value": "{{password}}",
							"type": "text"
						},
						{
							"key": "date_naissance",
							"value": "{{$randomDatePast}}",
							"type": "text"
						},
						{
							"key": "sexe",
							"value": "{{$randomBoolean}}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/register",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"register"
					]
				},
				"description": "route d'inscription d'un utilisateur"
			},
			"response": []
		},
		{
			"name": "4 abonnement de l'utilisateur",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "9af67dcc-ff35-418c-bcbf-13a1e1add057",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer"
				},
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "ld child",
							"value": "{{$randomInt}}",
							"type": "text"
						},
						{
							"key": "cvc",
							"value": "{{$randomInt}}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/subscription",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"subscription"
					]
				},
				"description": "route d'abonnement de l'utilisateur"
			},
			"response": []
		},
		{
			"name": "5 modification de l'utilisateur",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "firstname",
							"value": "{{$randomFileName}}",
							"type": "text"
						},
						{
							"key": "lastname",
							"value": "{{$randomLastName}}",
							"type": "text"
						},
						{
							"key": "date_naissance",
							"value": "{{$randomDatePast}}",
							"type": "text"
						},
						{
							"key": "sexe",
							"value": "{{$randomBoolean}}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/user",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user"
					]
				},
				"description": "Route de modification de l'utilisateur"
			},
			"response": []
		},
		{
			"name": "6 deconnection utilisateur",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "65107870-206b-4acd-aff2-896ad8f9e396",
						"exec": [
							"postman.setEnvironmentVariable(\"token\", \"del\");"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "dfa6b683-292a-44c6-8b5b-b799f9c8f024",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/user/off",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user",
						"off"
					]
				},
				"description": "Route de déconnection de l'utilisateur"
			},
			"response": []
		},
		{
			"name": "7 ajout utilisateur enfant",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "b882d888-b82c-4de1-952b-49acf6f3c539",
						"exec": [
							"pm.environment.set(Date.now() + \"emailEnfant\", makeEmail());\r",
							"pm.environment.set(Date.now() + \"passwordEnfant\", Date.now());\r",
							"\r",
							"function makeEmail() {\r",
							"\tvar strValues=\"abcdefg12345\";\r",
							"\tvar strEmail = \"\";\r",
							"\tvar strTmp;\r",
							"\tfor (var i=0;i<10;i++) {\r",
							"\t\tstrTmp = strValues.charAt(Math.round(strValues.length*Math.random()));\r",
							"\t\tstrEmail = strEmail + strTmp;\r",
							"\t}\r",
							"\tstrTmp = \"\";\r",
							"\tstrEmail = strEmail + \"@\";\r",
							"\tfor (var j=0;j<8;j++) {\r",
							"\t\tstrTmp = strValues.charAt(Math.round(strValues.length*Math.random()));\r",
							"\t\tstrEmail = strEmail + strTmp;\r",
							"\t}\r",
							"\tstrEmail = strEmail + \".com\"\r",
							"\treturn strEmail;\r",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "firstname",
							"value": "{{$randomFirstName}}",
							"type": "text"
						},
						{
							"key": "lastname",
							"value": "{{$randomLastName}}",
							"type": "text"
						},
						{
							"key": "email",
							"value": "{{$randomEmail}}",
							"type": "text"
						},
						{
							"key": "password",
							"value": "{{$randomPassword}}",
							"type": "text"
						},
						{
							"key": "date_naissance",
							"value": "{{$randomDatePast}}",
							"type": "text"
						},
						{
							"key": "sexe",
							"value": "{{$randomBoolean}}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/user/child",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user",
						"child"
					]
				},
				"description": "route d'ajout de nouvel utilisateur enfant"
			},
			"response": []
		},
		{
			"name": "8 suppression d'enfant",
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "id child",
							"value": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/user/child",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user",
						"child"
					]
				},
				"description": "route de suppression d'un enfant appartenant a un tuteur"
			},
			"response": []
		},
		{
			"name": "9 listage enfant",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": ""
				},
				"description": "route de listage des enfants"
			},
			"response": []
		},
		{
			"name": "10 ajout de carte bancaire",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "cartNumber",
							"value": "{{$randomBankAccountIban}}",
							"type": "text"
						},
						{
							"key": "month",
							"value": "{{$randomMonth}}",
							"type": "text"
						},
						{
							"key": "year",
							"value": "{{$randomInt}}",
							"type": "text"
						},
						{
							"key": "default",
							"value": "{{$randomInt}}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/user/cart",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user",
						"cart"
					]
				},
				"description": "route d'ajout de carte banquaire"
			},
			"response": []
		},
		{
			"name": "11 suppression du compte",
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/user",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user"
					]
				}
			},
			"response": []
		},
		{
			"name": "12 listing des sources audios",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "{{toekn}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/songs",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"songs"
					]
				},
				"description": "route de listing des sources audios"
			},
			"response": []
		},
		{
			"name": "13 récupération d'une source audio",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "id song",
							"value": "{id}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{baseUrl}}/song/{{id}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"song",
						"{{id}}"
					]
				},
				"description": "route de récuperation d'une source audio"
			},
			"response": []
		},
		{
			"name": "14 récupération des factures",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/bills",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"bills"
					]
				},
				"description": "route de récupération des factures"
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}